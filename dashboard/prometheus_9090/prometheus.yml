global:
  scrape_interval: 15s
  evaluation_interval: 15s
  external_labels:
    cluster: 'dashboard'
    environment: 'production'

scrape_configs:
  # Backend API 메트릭
  - job_name: 'dashboard-backend'
    static_configs:
      - targets: ['localhost:5010']
        labels:
          service: 'backend-api'
    metrics_path: '/metrics'
    scrape_interval: 15s

  # WebSocket 서버 메트릭 (Deprecated - WebSocket now integrated with backend on port 5010)
  # - job_name: 'dashboard-websocket'
  #   static_configs:
  #     - targets: ['localhost:5011']
  #       labels:
  #         service: 'websocket'
  #   metrics_path: '/metrics'
  #   scrape_interval: 15s

  # Node Exporter (시스템 메트릭)
  - job_name: 'node-exporter'
    static_configs:
      - targets: ['localhost:9100']
        labels:
          service: 'system'
    scrape_interval: 15s

# 알림 규칙
rule_files:
  - 'alerts.yml'

# Alertmanager 설정 (선택사항)
alerting:
  alertmanagers:
    - static_configs:
        - targets: ['localhost:9093']
