#!/bin/bash
################################################################################
# install_munge_auto.shë¥¼ SSH í‚¤ ì§€ì› ë²„ì „ìœ¼ë¡œ êµì²´
################################################################################

echo "================================================================================"
echo "ğŸ”„ install_munge_auto.sh ì—…ë°ì´íŠ¸"
echo "================================================================================"
echo ""

# ë°±ì—…
if [ -f "install_munge_auto.sh" ]; then
    BACKUP="install_munge_auto.sh.backup_$(date +%Y%m%d_%H%M%S)"
    cp install_munge_auto.sh "$BACKUP"
    echo "âœ… ë°±ì—… ìƒì„±: $BACKUP"
fi

# êµì²´
if [ -f "install_munge_auto_fixed.sh" ]; then
    cp install_munge_auto_fixed.sh install_munge_auto.sh
    chmod +x install_munge_auto.sh
    echo "âœ… install_munge_auto.sh ì—…ë°ì´íŠ¸ ì™„ë£Œ"
else
    echo "âŒ install_munge_auto_fixed.shë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!"
    exit 1
fi

echo ""
echo "================================================================================"
echo "âœ¨ ê°œì„  ë‚´ìš©"
echo "================================================================================"
echo ""
echo "  âœ… SSH í‚¤ ê¸°ë°˜ ì¸ì¦ ìë™ ê°ì§€"
echo "  âœ… SSH í‚¤ê°€ ìˆìœ¼ë©´ ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ ë¶ˆí•„ìš”"
echo "  âœ… SSH í‚¤ê°€ ì—†ìœ¼ë©´ sshpass ì‚¬ìš© ì˜µì…˜ ì œê³µ"
echo "  âœ… Step 4/5 scp ëª…ë ¹ì–´ ìˆ˜ì • (ë¹„ë°€ë²ˆí˜¸ ë¬¸ì œ í•´ê²°)"
echo ""
echo "================================================================================"
echo "ğŸ“‹ ì‚¬ìš© ë°©ë²•"
echo "================================================================================"
echo ""
echo "1. SSH í‚¤ê°€ ì„¤ì •ë˜ì–´ ìˆëŠ” ê²½ìš°:"
echo "   ./install_munge_auto.sh"
echo "   â†’ ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ ì—†ì´ ìë™ ì§„í–‰!"
echo ""
echo "2. SSH í‚¤ê°€ ì—†ëŠ” ê²½ìš°:"
echo "   ë¨¼ì € SSH í‚¤ ì„¤ì • ê¶Œì¥:"
echo "   ./setup_ssh_passwordless.sh"
echo ""
echo "   ë˜ëŠ” sshpass ì‚¬ìš©:"
echo "   ./install_munge_auto.sh"
echo "   â†’ sshpass ì‚¬ìš© ì—¬ë¶€ ì„ íƒ ê°€ëŠ¥"
echo ""
echo "================================================================================"
